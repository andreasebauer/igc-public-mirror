
# 1) Insert {%% block main_rows %%} with a visible test frame after the import line
printf "%s\n" \
"/^{% import \"_components.html\" as ui %}$/+1" \
"a" \
"{% block main_rows %}" \
"  <div class=\"group-frame\">TEST FRAME (should span both columns)</div>" \
"{% endblock %}" \
"." \
"wq" \
| ed -s igc/gui/templates/metrics_select.html

# 2) Inject page-local CSS: full-width group frame + pin main columns for this page
#    (insert before the last </style> in the page-level style block)
printf \"%s\\n\" \
\"$\" \
\"?</style>?\" \
\"i\" \
\"  .group-frame{\" \
\"    grid-column: 1 / -1;\" \
\"    border: 1px solid var(--border,#d9d9d9);\" \
\"    border-radius: 12px;\" \
\"    background: #fff;\" \
\"    padding: 12px;\" \
\"    box-shadow: 0 1px 1px rgba(0,0,0,.04), 0 2px 6px rgba(0,0,0,.06);\" \
\"    margin-top: 12px;\" \
\"  }\" \
\"  /* Pin the main two columns for this page so siblings before .left/.right don\\t
shift
layout
*/"
"
.matrix
{
grid-column:
1
